import{join as c}from"node:path";import{compileFile as a}from"pug";import e from"picocolors";function u(i,l,t){return i.replace(/<pug.+?(file|src)="(.+?)".*?\/.*?>/gi,(n,o,r)=>(o==="file"&&t&&t.warn(`${e.red(`the ${e.bold("file")} attribute is deprecated,`)} ${e.cyan(`please include ${e.italic(r)} with ${e.bold("src")} instead`)}`),l(r)))}function f(i,l){return{name:"vite-plugin-pug",handleHotUpdate({file:t,server:n}){t.endsWith(".pug")&&(n.config.logger.info(`${e.red("pug\u2019s not hot")} \u{1F32D} ${e.cyan(t)}`),n.ws.send({type:"full-reload"}))},transformIndexHtml(t,{server:n,filename:o}){return u(t,r=>{let g=p=>a(p,i)(l);if(typeof i?.localImports=="function"&&i.localImports(o)||i?.localImports){let p=o.replace(/(.*)[\\\/].*\.html$/,"$1"),s=c(p,r);return g(s)}return g(r)},n?.config.logger)}}}export{f as default,u as pugs};
//# sourceMappingURL=index.js.map